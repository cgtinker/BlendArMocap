<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create and customize Configurations &mdash; BlendArMocap 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Freemocap" href="../freemocap.html" />
    <link rel="prev" title="Basics" href="transfer.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            BlendArMocap
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detection.html">Mediapipe Detection</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Transfer</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="transfer.html">Basics</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Create and customize Configurations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup-new-configs">Setup New Configs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#concept">Concept</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tools">Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-o-transfer-configuration">I/O Transfer Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../freemocap.html">Freemocap</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BlendArMocap</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Transfer</a></li>
      <li class="breadcrumb-item active">Create and customize Configurations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/transfer/create_config.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="create-and-customize-configurations">
<h1>Create and customize Configurations<a class="headerlink" href="#create-and-customize-configurations" title="Permalink to this heading"></a></h1>
<section id="setup-new-configs">
<h2>Setup New Configs<a class="headerlink" href="#setup-new-configs" title="Permalink to this heading"></a></h2>
<p>The setup process is quite unique, so lets break it down in steps.
Objects which have been generated during detection contain an ID to display
additional properties in the <em>object properties panel</em>.
Those object properties can be modified to either change the current
mapping configuration or even create completely new configurations!</p>
<p>The setup options are location in the <code class="docutils literal notranslate"><span class="pre">Object</span> <span class="pre">constraint</span> <span class="pre">properties</span> <span class="pre">&gt;</span> <span class="pre">BlendArMocap</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><strong>mapping object</strong> - an object with instructions and constraints</p></li>
<li><p><strong>driver object</strong> - a generated driver object based on instructions</p></li>
<li><p><strong>target object</strong> - copies values from driver_object using constraints</p></li>
</ul>
</div>
</section>
<section id="concept">
<h2>Concept<a class="headerlink" href="#concept" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt>Target</dt><dd><dl class="simple">
<dt>Target bone or object which should be driven by constraints.</dt><dd><ul class="simple">
<li><p>Target Type <em>[Armature, Mesh, Any]</em>: Apply constraints to target (copies constraints from this object)</p></li>
<li><p>Sub Target <em>[Object, Bone]</em>: Target may be a Bone.</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>Drivers</dt><dd><p>There are three core concepts to set up drivers.
In a nutshell <em>[Remap Drivers, IK Chain Driver, Remap by Distance Drivers]</em>.</p>
</dd>
<dt>Remap Drivers</dt><dd><p>Object values (especially rotations) may get remapped using a remap driver.
To do so, navigate to <em>Value Mapping</em> and select the properties you want to remap - for example <em>rotation x, y, z</em>.
<em>From min, from max, to min, to max</em> is used to define slopes, those are similar to the <em>map range convertor node</em> in the shader editor.
Therefore, input the min and max values <em>in radians</em> from the selected object and the to min and max values <em>in radians</em> you want to have as result. (pi = 180°)
If necessary, you can also use the <em>factor</em> and <em>offset</em> however, slopes can deliver better control once you got the hang of them.
You can do so for all axis separately if necessary, press the <em>+</em> icon to do so.
To get some information about the current select object, navigate to <em>Tools</em> and press the <em>Log Object Info</em> Button, you’ll find min and max values from the object in the info panel.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remapping object values driver properties</p>
<dl class="simple">
<dt>without remapping object</dt><dd><p>slope = (to_max - to_min) / (from_max - from_min)
offset = to_min - slope * from_min
f(x) = (slope * property_value + offset) * factor + offset</p>
</dd>
<dt>with remapping object</dt><dd><p>slope = (to_max * remapping_value - to_min * remapping_value) / (from_max - from_min)
offset = to_min - slope * from_min * remapping_value
f(x) = (slope * property_value + offset) * factor + offset</p>
</dd>
</dl>
</div>
<dl class="simple">
<dt>IK Chain Drivers</dt><dd><p>The idea of ik chain drivers basically is to construct an ik chain in reverse order.
The end of the ik chain neither has a parent and nor gets remapped - it’s mainly a reference.
The next chain link has the chain end as parent, and gets remapped by the bone length which separates itself from the parent.
Repeat this till you are at the ik start. As Example:</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>objects: shoulder_obj -&gt; elbow_obj -&gt; hand_obj
bones: shoulder_bone -&gt; elbow_bone -&gt; hand_bone</p>
<p>shoulder_obj(target=shoulder_bone, parent=None, remap_bone=None)
elbow_obj(target=elbow_bone, parent=shoulder_obj, remap_bone=shoulder_bone.length)
hand_obj(target=hand_bone, parent=elbow_obj, remap_bone=elbow_bone.length)</p>
<p>Recursivly applies:
dist = distance between parent and obj
f(x) = (dist / remap_bone_length) * (obj_location - previous_chain_obj_location)</p>
</div>
<p>Checkout the rigify rig implementation of the arms as example setup.</p>
<dl class="simple">
<dt>Remap Drivers by Distance</dt><dd><p>When using remap drivers by distance, we aren’t using any of the object values.
In this case, the distance between two objects gets used as driver value, which then gets remapped similar to the remap driver.
The single difference is that the offset gets multiplied by the remapping value, which allows to basically offset in % (which usually isn’t wanted for rotations).
However, this time it makes a lot of sense to remap the value by a bone of the target armature as we are working with position and not rotation data - this makes remapping the values a lot easier.
Again, to get some information about the current select object, navigate to <em>Tools</em> and press the <em>Log Object Info</em> Button, you’ll find min and max values from the object in the info panel.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>slope = (to_max * remapping_value - to_min * remapping_value) / (from_max - from_min)
offset = to_min * remapping_value - slope * from_min
f(x) = (slope * property_value + offset) * factor + offset * remapping_value</p>
</div>
<dl class="simple">
<dt>Constraints</dt><dd><p>Finally, add constraints to the object - the constraints will get applied to the target when transferring.
As mentioned in the beginning, the target objects copies values from the driver using constraints.
You may use any constraint to do so and modify the constraint properties to your likings to adjust transfer results.</p>
</dd>
</dl>
</section>
<section id="tools">
<h2>Tools<a class="headerlink" href="#tools" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt>Transfer Selection</dt><dd><p>Run transfer only for selected objects. When transferring chains the entire chain has to be selected, not just a link.</p>
</dd>
<dt>Smooth Animation Data</dt><dd><p>Run Blenders internal smooth f-Curves for selected objects.</p>
</dd>
<dt>Log Object Info</dt><dd><p>Log min, max values and information about the selected object to the <em>info panel</em>.</p>
</dd>
</dl>
</section>
<section id="i-o-transfer-configuration">
<h2>I/O Transfer Configuration<a class="headerlink" href="#i-o-transfer-configuration" title="Permalink to this heading"></a></h2>
<p>Transfer configurations can be imported and exported.
If you create a new configuration and want to share it with the community let me know via <a class="reference external" href="mailto:hello&#37;&#52;&#48;cgtinker&#46;com">hello<span>&#64;</span>cgtinker<span>&#46;</span>com</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="transfer.html" class="btn btn-neutral float-left" title="Basics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../freemocap.html" class="btn btn-neutral float-right" title="Freemocap" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, cgtinker.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>